---
const pathname = Astro.url.pathname;
const isHome = pathname === "/";

const links = [
    { name: "Work", href: "/#projects", match: "hash" },
    { name: "Projects", href: "/projects", match: "path" },
    { name: "Profile", href: "/profile", match: "path" },
    { name: "Writing", href: "/writing", match: "path" },
];
---

<nav class="flex flex-wrap justify-center gap-2 w-full animate-nav-in">
    {
        links.map((link) => {
            // Simple active state check: exact match or starts with for sub-routes
            const isActive =
                link.match === "path"
                    ? pathname.startsWith(link.href)
                    : pathname === "/" && link.href === "/#projects"; // Rough heuristic for home anchor

            return (
                <a
                    href={link.href}
                    class:list={[
                        "px-5 py-2.5 rounded-[6px] text-sm font-medium transition-all duration-300 relative group",
                        isActive
                            ? "bg-[#222] text-white shadow-lg shadow-white/5"
                            : "bg-transparent text-zinc-400 hover:text-white hover:bg-[#111]",
                    ]}
                >
                    <span class="relative z-10">{link.name}</span>
                    {/* Hover Glow Effect */}
                    <div class="absolute inset-0 rounded-[6px] bg-white/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none" />
                </a>
            );
        })
    }

    <a
        href="https://github.com/agustindiazcano"
        target="_blank"
        class="px-5 py-2.5 rounded-[6px] text-sm font-medium bg-transparent text-zinc-400 hover:text-white hover:bg-[#111] transition-all duration-300 flex items-center gap-2 group relative"
    >
        <span>GitHub</span>
        <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="opacity-70 group-hover:opacity-100 transition-opacity"
        >
            <path
                d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"
            ></path>
            <path d="M9 18c-4.51 2-5-2-7-2"></path>
        </svg>
    </a>
</nav>

<style>
    .animate-nav-in {
        animation: navSlideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        opacity: 0;
        transform: translateY(10px);
    }

    @keyframes navSlideUp {
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
</style>
